<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>2025 - Tankey ❤️ Monody</title>
<link rel="icon" href="./love.png">
<link rel="shortcut icon" href="./love.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

<style>
html, body {
    height: 100%;
    margin: 0;
    font-family: "Helvetica Neue", "Microsoft Yahei", sans-serif;
    color: #CFEBE4;
    font-size: 18px;
    line-height: 2;
    letter-spacing: 1.2px;
    background: linear-gradient(to bottom, rgb(203, 235, 219) 0%, rgb(55, 148, 192) 120%);
}

a { color: #ebf7f4; }

/* logo头像 */
#logo {
    width: 128px;
    border-radius: 200px;
    box-shadow: 0 0 40px rgba(63, 81, 181, 0.72);
    border: 3px solid #00a0ff;
    display: block;
    margin: 20px auto;
    transition: all 1s;
}
#logo:hover {
    box-shadow: 0 0 19px #fff;
    transform: rotate(360deg);
}

/* canvas */
.canvas {
    display: block;
    margin: 0 auto;
}

/* 文字 */
.text {
    position: fixed;
    bottom: 80px;
    text-align: center;
    width: 100%;
    font-weight: bold;
    color: #ed3073;
}

/* 照片墙 */
.photo-carousel {
    width: 100%;
    height: 260px;
    perspective: 1200px;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    margin-top: 50px;
    padding-bottom: 20px; /* 底部距离 */
    background: transparent; /* 继承页面背景 */
}
.carousel {
    position: relative;
    width: 300px;
    height: 220px;
    transform-style: preserve-3d;
    animation: rotate 16s linear infinite;
}
.carousel img {
    position: absolute;
    width: 240px;
    height: 220px;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    object-fit: cover;
    border-radius: 16px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.3);
}
@keyframes rotate {
    0% { transform: rotateY(0deg); }
    100% { transform: rotateY(360deg); }
}
</style>
</head>

<body>
<!-- 头像 -->
<div class="cs">
    <img src="./baby.png" id="logo">
</div>

<!-- Canvas -->
<canvas class="canvas"></canvas>

<!-- 文字 -->
<p class="text">
    We fell in love
    <br/>
    <span id="span_dt_dt"></span>
</p>

<!-- iPod风格照片墙 -->
<div class="photo-carousel" id="photo-carousel">
    <div class="carousel" id="carousel"></div>
</div>

<!-- 背景音乐 -->
<audio id="bgm" autoplay loop muted>
    <source src="./music/white.mp3" type="audio/mpeg">
</audio>

<script>
// 计时器
function show_date_time() {
    const BirthDay = new Date("12/29/2017 18:20:00");
    const now = new Date();
    const diff = now.getTime() - BirthDay.getTime();
    const days = Math.floor(diff / (1000*60*60*24));
    const hrs = Math.floor((diff / (1000*60*60)) % 24);
    const mins = Math.floor((diff / (1000*60)) % 60);
    const secs = Math.floor((diff / 1000) % 60);
    document.getElementById("span_dt_dt").innerHTML = `${days}天${hrs}小时${mins}分${secs}秒`;
    setTimeout(show_date_time, 1000);
}
show_date_time();

// 照片墙动态生成
window.onload = function() {
    const photos = ['./photos/1.png','./photos/2.png','./photos/3.png','./photos/4.png','./photos/5.png'];
    const carousel = document.getElementById('carousel');
    if (photos.length === 0) {
        document.getElementById('photo-carousel').style.display = 'none';
        return;
    }
    const fragment = document.createDocumentFragment();
    const angleStep = 360 / photos.length;
    photos.forEach((src, i) => {
        const img = document.createElement('img');
        img.src = src;
        img.alt = i+1;
        img.style.transform = `rotateY(${angleStep*i}deg) translateZ(400px)`;
        fragment.appendChild(img);
    });
    carousel.appendChild(fragment);

    // Canvas自适应
    const canvas = document.querySelector('.canvas');
    const ctx = canvas.getContext('2d');
    function resizeCanvas() {
        canvas.width = window.innerWidth - 100;
        canvas.height = window.innerHeight - 30;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
}

// 背景音乐控制
const audio = document.getElementById("bgm");
document.addEventListener("click", ()=>{ audio.muted = false; audio.play(); });
document.addEventListener("dblclick", ()=>{ audio.paused ? audio.play() : audio.pause(); });
</script>
</body>
</html>
